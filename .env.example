# ============================================================================
# PreFlight AI - Environment Configuration (v2.0 - MCP Edition)
# ============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!

# ============================================================================
# MCP Server Configuration (NEW - Model Context Protocol)
# ============================================================================
# MCP servers provide standardized interfaces to external data sources
# The backend automatically falls back to direct APIs if MCP servers unavailable

# Open-Meteo MCP Server (Weather Data)
# Default: http://openmeteo-mcp:3000 (Docker) or http://localhost:3000 (local)
OPENMETEO_MCP_SERVER_URL=http://openmeteo-mcp:3000

# AviationStack MCP Server (Flight Tracking)
# Default: http://aviationstack-mcp:3001 (Docker) or http://localhost:3001 (local)
AVIATIONSTACK_MCP_SERVER_URL=http://aviationstack-mcp:3001

# MCP Connection Settings
MCP_CONNECTION_TIMEOUT=5
MCP_REQUEST_TIMEOUT=30

# ============================================================================
# Langflow Configuration
# ============================================================================
# Get this from your Langflow instance after importing the workflow
LANGFLOW_FLOW_ID=your_flow_id_here

# ============================================================================
# External API Keys (Required for MCP fallback & direct access)
# ============================================================================

# AviationStack API Key (REQUIRED for flight tracking)
# Get your key at: https://aviationstack.com/
# Used by MCP server AND as fallback when MCP unavailable
AVIATIONSTACK_API_KEY=your_aviationstack_api_key_here

# Open-Meteo (FREE - No API key required!)
# MCP server uses Open-Meteo API directly - no key needed
OPENMETEO_BASE_URL=https://api.open-meteo.com/v1/forecast

# ============================================================================
# Google Maps Platform APIs (OPTIONAL)
# ============================================================================
# Google Cloud Console: https://console.cloud.google.com/
# Enable: Maps JavaScript API, Geocoding API, Distance Matrix API, Places API
# SECURITY WARNING: Never commit actual API keys to version control
# PRODUCTION REQUIREMENTS:
#   - Restrict API key by IP address in Google Cloud Console
#   - Restrict API key to only required APIs (Geocoding, Distance Matrix)
#   - Set daily quotas and billing alerts
#   - Use separate keys for development and production
#   - Rotate keys regularly (every 90 days recommended)
# Leave empty to disable Google Maps features (app works without it)
GOOGLE_MAPS_API_KEY=
GOOGLE_MAPS_GEOCODING_ENABLED=true
GOOGLE_MAPS_DISTANCE_MATRIX_ENABLED=true
GOOGLE_MAPS_PLACES_ENABLED=false
GOOGLE_MAPS_RATE_LIMIT_PER_MINUTE=50
GOOGLE_MAPS_CACHE_TTL_SECONDS=86400

# ============================================================================
# Notification Services - Twilio (SMS)
# ============================================================================
# Twilio: https://www.twilio.com/
# Get credentials from your Twilio Console
TWILIO_ACCOUNT_SID=your_twilio_account_sid_here
TWILIO_AUTH_TOKEN=your_twilio_auth_token_here
TWILIO_PHONE_NUMBER=+1234567890

# ============================================================================
# Notification Services - SendGrid (Email)
# ============================================================================
# SendGrid: https://sendgrid.com/
# Free tier: 100 emails/day
SENDGRID_API_KEY=your_sendgrid_api_key_here
SENDGRID_FROM_EMAIL=alerts@preflight.ai

# ============================================================================
# Notification Services - Slack
# ============================================================================
# Create an Incoming Webhook: https://api.slack.com/messaging/webhooks
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# ============================================================================
# Database Configuration (for local development)
# ============================================================================
# These are already set in docker-compose.yml for containers
# Only needed if running backend locally without Docker
DATABASE_URL=postgresql://preflight:preflight_secure_pass@localhost:5432/preflight_db
REDIS_URL=redis://localhost:6379/0

# ============================================================================
# Application Settings
# ============================================================================
# Environment: development, staging, production
# PRODUCTION: Set to "production" and ensure all security measures enabled
APP_ENV=development

# Logging Level: DEBUG, INFO, WARNING, ERROR, CRITICAL
# PRODUCTION: Use INFO or WARNING
LOG_LEVEL=DEBUG

# ============================================================================
# Security (PRODUCTION CRITICAL - CHANGE ALL DEFAULTS)
# ============================================================================
# SECURITY WARNING: Generate strong random secrets for production
# Use: python -c "import secrets; print(secrets.token_urlsafe(32))"
# NEVER commit actual secrets to version control
# PRODUCTION: Use secrets management (AWS Secrets Manager, Azure Key Vault, etc.)
SECRET_KEY=your_super_secret_key_change_this_in_production
JWT_SECRET=your_jwt_secret_key_change_this_in_production

# ============================================================================
# Frontend Configuration
# ============================================================================
REACT_APP_API_URL=http://localhost:8000
REACT_APP_ENABLE_ANALYTICS=false

# ============================================================================
# Model Configuration
# ============================================================================
MODEL_VERSION=1
MODEL_PATH=/app_data/models/lstm_xgboost_v1.pkl
AUTO_RETRAIN_ENABLED=true
RETRAIN_THRESHOLD_ACCURACY=0.85

# ============================================================================
# Security & Rate Limiting (PRODUCTION REQUIRED)
# ============================================================================
# CORS Configuration - Specify exact domains in production
# SECURITY: Never use "*" in production
# Format: comma-separated list of allowed origins
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8000

# Rate Limiting - Prevents API abuse
# Format: "number/unit" where unit can be: second, minute, hour, day
API_RATE_LIMIT_PER_MINUTE=60/minute
API_RATE_LIMIT_STRICT=10/minute

# ============================================================================
# Cost Management
# ============================================================================
# Set daily budget limits for external APIs (in USD)
DAILY_BUDGET_WEATHER=5.00
DAILY_BUDGET_FLIGHT_TRACKING=10.00
DAILY_BUDGET_SMS=20.00
DAILY_BUDGET_EMAIL=5.00

# ============================================================================
# Monitoring (Optional)
# ============================================================================
PROMETHEUS_ENABLED=false
GRAFANA_ENABLED=false

# ============================================================================
# Development Tools
# ============================================================================
# Set to 'true' to enable pgAdmin and Redis Commander
ENABLE_DB_TOOLS=false
